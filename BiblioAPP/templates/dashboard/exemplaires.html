{% load compress static %}
<!-- Reservation Section -->
<div class="flex flex-wrap -mx-3 mb-5">
    <div class="w-full max-w-full px-3 mb-6 mx-auto">
        <div class="relative flex-auto flex flex-col break-words min-w-0 bg-clip-border rounded-lg bg-white m-5">
            <div class="relative flex flex-col min-w-0 break-words border border-dashed bg-clip-border rounded-2xl border-stone-200 bg-light/30">
                <h1 class="text-xl font-bold mb-6 text-orange-400 bg-gray-100 w-fit px-4 py-2 rounded-lg">Exemplaires</h1>
                <form id="student-search-form" method="GET" action="/dashboard-exemplaires">
                    <div class="flex items-center p-6 space-x-6 bg-blue-200 rounded-xl shadow-lg justify-center">
                        <div class="flex bg-gray-100 p-4 w-72 space-x-4 rounded-lg">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 opacity-30" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                            {{ form.query }}
                        </div>
                        <button type="submit" class="bg-indigo-600 py-3 px-5 text-white font-semibold rounded-lg hover:shadow-lg transition duration-300 cursor-pointer">
                            <span>Search</span>
                        </button>
                    </div>
                </form>

                <!-- Card Body -->
                {% for item in Livres %}
                    <p class="text-lg font-semibold tracking-wide text-center text-gray-900 bg-blue-100 uppercase border-y border-gray-600">{{ item.titre }}</p>
                    <table class="w-full my-0 align-middle text-dark border-neutral-200 rounded-lg">
                        <thead>
                            <tr class="text-sm font-semibold tracking-wide text-left text-gray-900 bg-gray-100 uppercase border-b border-gray-600">
                                <th class="px-4 py-3">ID Exemplaire</th>
                                <th class="px-4 py-3">Etat</th>
                                <th class="px-4 py-3">Date D'achat</th>
                                <th class="px-4 py-3">Modifier</th>
                            </tr>
                        </thead>
                        {% for exemple in Exemplaires %}
                            {% if exemple.id_livre == item %}
                                <tr>
                                    <form action="{% url 'updateExemplaire' %}" method="post">
                                        {% csrf_token %}
                                        <input type="hidden" name="idexemplaire" value="{{ exemple.id_exemplaire }}">
                                        <td class="px-4 py-3">{{ exemple.id_exemplaire }}</td>
                                        <td class="px-4 py-3">
                                            <select name="etat" class="hover:cursor-pointer font-semibold bg-transparent border-none">
                                                <option class="text-green-500 p-2 font-semibold" value="Disponible" {% if exemple.etat == "Disponible" %} selected {% endif %} {% if exemple.etat == "Hors-pret" %} disabled {% endif %}>Disponible</option>
                                                <option class="text-orange-300 p-2 font-semibold" value="Hors-pret" {% if exemple.etat == "Hors-pret" %} selected disabled {% endif %} {% if exemple.etat == "Disponible" %} disabled {% endif %}>Hors-pret</option>
                                                <option class="text-orange-500 font-semibold" value="A enlever" {% if exemple.etat == "A enlever" %} selected {% endif %} {% if exemple.etat == "Hors-pret" %} disabled {% endif %}>A enlever</option>
                                                <option class="text-red-500 p-2 font-semibold" value="perdu" {% if exemple.etat == "perdu" %} selected {% endif %}>perdu</option>
                                                <option class="text-red-500 p-2 font-semibold" value="delete">Supprimer</option>
                                            </select>
                                        </td>
                                        <td class="px-4 py-3">{{ exemple.date_achat }}</td>
                                        <td class="px-0 py-3">
                                            <button type="submit" class="bg-yellow-500 hover:bg-yellow-400 text-white font-semibold rounded px-4 py-2 flex items-center gap-2">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pen-line"><path d="M12 20h9"></path><path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"></path></svg>
                                                Modifier
                                            </button>
                                        </td>
                                    </form>
                                </tr>
                            {% endif %}
                        {% endfor %}
                    </table>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
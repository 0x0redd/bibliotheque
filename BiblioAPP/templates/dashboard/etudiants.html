{% load compress %}
{% load static %}
<!--reservation -->

<div class="flex flex-wrap -mx-3 mb-5">
  <div class="w-full max-w-full px-3 mb-6 mx-auto">
    <div class="relative flex-[1_auto] flex flex-col break-words min-w-0 bg-clip-border rounded-[.95rem] bg-white m-5">
      <div class="relative flex flex-col min-w-0 break-words border border-dashed bg-clip-border rounded-2xl border-stone-200 bg-light/30">
        <div class="space-y-2">
          <h1 class="text-xl text-bold mg-16 text-orange-400 bg-gray-100 w-fit px-4 py-2 rounded-lg">Etudiants</h1>
          <form id="student-search-form" method="GET" action="/dashboard-etudiants">
            <div class="flex items-center p-6 space-x-6 bg-blue-200 rounded-xl shadow-lg justify-center">
              <div class="flex bg-gray-100 py-2 px-4 w-72 space-x-4 rounded-lg">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 opacity-30" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
                {{ form.query }}
              </div>
              <p class="italic text-sm ">Filtrer Par</p>
              <div class="relative group">
                {{ form.filter }}
              </div>
              <button type="submit" class="bg-blue-600 py-2 px-4 text-white font-semibold rounded-lg hover:shadow-lg transition duration-300 cursor-pointer">
                <span>Search</span>
              </button>
            </div>
          </form>
        </div>
        <!-- card body  -->
        <div class="flex-auto block py-8 pt-6 px-9">
          <div class="overflow-x-auto">
            <table class="w-full my-0 align-middle text-dark border-neutral-200 rounded-lg">
              <thead class="align-bottom rounded-lg">
                <tr class="text-md font-semibold tracking-wide text-left text-gray-900 bg-gray-100 uppercase border-b border-gray-600">
                  <th class="px-4 py-3 text-start">Nom et prenom</th>
                  <th class="px-4 py-3 text-start">CIN</th>
                  <th class="px-4 py-3 text-start">CNE</th>
                  <th class="px-4 py-3 text-start">Email</th>
                  <th class="px-4 py-3 text-start">Filiere</th>
                  <th class="px-4 py-3 text-start">Penalites</th>
                  <th class="px-4 py-3 text-start">Reservation</th>
                  <th class="px-4 py-3 text-start">Emprunt</th>
                </tr>
              </thead>
              <tbody>
                {% for item in Etudiants %}
                  <tr class="border-b border-dashed last:border-b-0">
                    <td class="px-4 py-3 border">{{ item.username }}</td>
                    <td class="px-4 py-3 border">{{ item.cni }}</td>
                    <td class="px-4 py-3 border">{{ item.massar }}</td>
                    <td class="px-4 py-3 border">{{ item.email }}</td>
                    <td class="px-4 py-3 border">{{ item.filiere }}</td>
                    <td class="px-4 py-3 border">{{ item.penalite }}</td>
                    <td class="px-4 py-3 border">{{ item.reservation_count }}</td>
                    <td class="px-4 py-3 border">{{ item.emprunt_count }}</td>
                  </tr>
                {% empty %}
                  <tr>
                    <td colspan="8" class="text-2xl text-center">Pas d'historique pour le moment</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>